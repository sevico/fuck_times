!function(){var e=function(e,i,t){if(window.addEventListener)e.addEventListener(i,t,!1);else e.attachEvent("on"+i,t)};var i=function(e,i,t){if(window.removeEventListener)e.removeEventListener(i,t);else e.detachEvent("on"+i,t)};var t=function(e){e=e||"";if(e.indexOf("passport.126.com/webzj")>=0||e.indexOf("passport.yeah.net/webzj")>=0||e.indexOf("dl.reg.163.com/webzj")>=0)e=e.replace(/\:\/\/[^\/]+\/webzj\//,function(e){return e+"b/"});else e=e.replace(/\:\/\/([^\/]+)/,function(e){return e+"/b"});return e};var n={},r,a,o=[],s;n.flag=!1;n.getDiscoverCss=function(){var e="";if(this.__coverBackground&&this._$supportCss3("animation"))e=this.__coverBackground.indexOf("background:")!=-1?this.__coverBackground:"";return"position:fixed;_position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:rgb(0,0,0); filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);-moz-opacity:0.6;-khtml-opacity:0.6;opacity:0.6;z-index:1000;"+e};n.getPanelCss=function(e,i){return"position:fixed;z-index:10000;left:50%;top:50%;width:"+e+"px;margin-left:-"+e/2+"px;height:"+i+"px;margin-top:-"+i/2+"px;"};n.getIframeCss=function(){var e=null;if(this.__iframeShowAnimation)e="-webkit-animation:"+this.__iframeShowAnimation+";-moz-animation:"+this.__iframeShowAnimation+";-ms-animation:"+this.__iframeShowAnimation+";-o-animation:"+this.__iframeShowAnimation+";animation:"+this.__iframeShowAnimation+";";return"width:100%;height:100%;border:none;background:none;"+(e?e:"")};n.setOpacity=function(e,i){e.style.opacity=i/100};n.setWh=function(e,i,t){e.style.cssText=this.getPanelCss(i,t)};n.addIframe=function(e,i){var t=document.getElementById("x-URS-iframe"),r=this._name||"";if(!t){try{t=document.createElement('<iframe  name="'+r+'" allowTransparency=true ></iframe>')}catch(a){t=document.createElement("iframe");t.allowTransparency=!0;t.name=r}t.frameBorder=0;t.id="x-URS-iframe";t.scrolling="no";t.style.cssText=this.getIframeCss()}if(i)e.appendChild(t);else{var o=420,s=408;if(n.frameSize){o=n.frameSize.width;s=n.frameSize.height}var c=document.getElementById("x-discover");if(!c){c=document.createElement("div");c.id="x-discover";c.style.cssText=this.getDiscoverCss()}var d=document.getElementById("x-panel");if(!d){d=document.createElement("div");d.id="x-panel";this._panel=d;d.style.cssText=this.getPanelCss(o,s)}d.appendChild(t);e.appendChild(c);e.appendChild(d);e.style.display="none"}};n.initIframe=function(e){var i=this;var t=document.getElementById("x-URS-iframe");if(a.afterSetIframeSrc)a.afterSetIframeSrc(t);window.setTimeout(function(){i.__loadTime=(new Date).getTime();if(t)t.src=r},0);i.sto=clearTimeout(i.sto);if(window._$needUrsBgp)if(1!=e)i.sto=setTimeout(function(){i.sto=clearTimeout(i.sto);r=r.replace("webzj.reg.163.com","webzj2.reg.163.com");if(window._$passportNeedUrsBgp)r=r.replace("passport.","passport2.").replace("reg.icourse163.org","reg2.icourse163.org");if(a.wdaId)r=r.replace(/wdaId=([^&]+)/,"wdaId=UA1482833332087");n.initIframe.call(i,1)},a.bgpTime)};n._$supportCss3=function(e){var i=["webkit","Moz","ms","o"],t,n=[],r=document.documentElement.style,a=function(e){return e.replace(/-(\w)/g,function(e,i){return i.toUpperCase()})};for(t in i)n.push(a(i[t]+"-"+e));n.push(a(e));for(t in n)if(n[t]in r)return!0;return!1};var c=function(){var e=document.getElementById("x-URS-iframe");var i=window.name||"_parent";var t={};t.data=a;t.data.from="URS|";t.data.topURL=location.href||"";t.origin="*";t.source=i;t.data.loadTime=(new Date).getTime()-this.__loadTime;p(e.contentWindow,t)};var d=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(i){i=i||"";if(e.test(i))return RegExp.$1;else return"*"}}();var f=function(e,i){try{i=i.toLowerCase();if(null===e)return"null"==i;if(void 0===e)return"undefined"==i;else return Object.prototype.toString.call(e).toLowerCase()=="[object "+i+"]"}catch(t){return!1}};var l=function(e,i,t){if(!e)return"";var n=[];for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(a)if(!f(a,"function")){if(f(a,"date"))a=a.getTime();else if(f(a,"array"))a=a.join(",");else if(f(a,"object"))a=JSON.stringify(a);if(t)a=encodeURIComponent(a);n.push(encodeURIComponent(r)+"="+a)}else;else;}else;return n.join(i||",")};var p=function(){var e="MSG|";var i=function(i){var t={};i=i||{};t.origin=i.origin||"";t.ref=location.href;t.self=i.source;t.data=JSON.stringify(i.data);return e+l(t,"|",!0)};return function(e,t){if(window.postMessage){t=t||{};e.postMessage(JSON.stringify(t.data),d(t.origin))}else o.unshift({w:e,d:escape(i(t))})}}();var u=function(){var e=navigator.appName;if("Netscape"==e){var i=window.open("about:blank","_self");i.opener=null;i.close()}else if("Microsoft Internet Explorer"==e){window.opener=null;window.open("","_self");window.close()}};window.URS=function(l,p,m){1==this._$COM_NUM?this._$COM_NUM=1:this._$COM_NUM=2;if("object"==typeof l)m=l;if("0"==m.needUrsBgp){m.passportNeedUrsBgp=0;window._$needUrsBgp=0;window._$passportNeedUrsBgp=0}else{if(m.crossDomainUrl||m.cookieDomain){window._$passportNeedUrsBgp=1;m.passportNeedUrsBgp=1}window._$needUrsBgp=1;m.needUrsBgp=1}n.frameSize=m.frameSize;n.__coverBackground=m.coverBackground;n.__iframeShowAnimation=m.iframeShowAnimation;window.PTDOM=0!=m.isHttps?"https://":"http://";if(m.cssDomain&&m.cssFiles){n.__cssStr="cd="+m.cssDomain+"&cf="+m.cssFiles;if(n.__cssStr.indexOf("http://")!=-1)window.PTDOM="http://";n.__cssStr=encodeURIComponent(n.__cssStr)}this.isInclude=0;if(m.includeBox)if("string"==typeof m.includeBox)this.isInclude=document.getElementById(m.includeBox)||0;else this.isInclude=m.includeBox;n.needPrepare=m.needPrepare||0;var h,g;if("string"==typeof p)g=p;if("string"==typeof l)h=document.getElementById(l);else h=l;if(m.logincb)this.logincb=m.logincb;if(m.closecb)this.closecb=m.closecb;if(m.regcb)this.regcb=m.regcb;if(m.statecb)this.statecb=m.statecb;if(m.resize)this.resize=m.resize;if(m.changepage)this.changepage=m.changepage;if(m.initReady)this.initReady=m.initReady;if(m.otherRegSuccess)this.otherRegSuccess=m.otherRegSuccess;s=document.createElement("div");s.id="x-URS";document.body.appendChild(s);this.box=s;var w="index.html";if(m.single){w="index_dl.html";if("register"==m.page)w="index_reg.html"}var v=m.crossDomainUrl||"webzj.reg.163.com/out/pub/";r=window.PTDOM+v+w;var _=parseInt(1e3*Math.random());m.pathB=0;if(window.URS._$pathBPercent)if(_<=window.URS._$pathBPercent)m.pathB=1;if(m.pathB)r=t(r);if(n.__cssStr)r+="?"+n.__cssStr+"&wdaId="+(m.wdaId||"");else r+="?wdaId="+(m.wdaId||"");a=m||{};a.bgpTime=a.bgpTime||1e4;r+="&pkid="+(a.promark||"")+"&product="+(a.product||"");try{JSON.stringify(a)}catch(y){return null}if(!this.isInclude&&h&&g)e(h,g,this.showIframe);else this.includeBox=this.isInclude;if(n.needPrepare||this.isInclude)this.prepareIframe();var I=function(e){if(e)e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};var S=function(e){I(e);var i=e.data||"{}";R({data:i,origin:d(e.origin)})};var b=this;var R=function(e){var t=e.data;var r;if(b.isInclude)r=b.includeBox;else r=n._panel;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(a){t={}}if(t["URS-READY"]){b.sto=clearTimeout(b.sto);if(b.initReady)b.initReady()}if(!t["URS-READY"]||!b.isInclude&&n.needPrepare){if(t["URS-READY"]&&!n._initReady)n._initReady=!0;if(t["URS-CM"]&&document.getElementById("x-URS-iframe"))if(!t["URS-CM-STATE"])if(!t||!t.fromOutLogin||t.toOpener){if("otherRegSuccess"==t.type){if(b.otherRegSuccess)b.otherRegSuccess(t)}else if("success"==t.type){if(b.logincb)b.logincb(t.username,t.isOther,t);if(!this.isInclude){if(h&&g)i(h,g,b.showIframe);b.closeIframe()}}else if("close"==t.type){if(b.closecb)b.closecb();b.closeIframe()}else if("resize"==t.type||"init"==t.type){r.style.width=t.width+"px";r.style.height=t.height+"px";if(!b.isInclude)r.style.marginLeft=-1*t.width/2+"px";if(b.resize)b.resize(t)}else if("register-success"==t.type){if(b.regcb)b.regcb(t.username,t.url)}else if("changepage"==t.type)if(b.changepage)b.changepage(t.page)}else{try{window.opener.$outLogin(t)}catch(a){}setTimeout(function(){u()},200)}else if(b.statecb)b.statecb(t["URS-CM-STATENAME"],t["URS-CM-STATE"])}else c.call(b)}};var x=function(){var e="MSG|";var i=function(e,i){var t=f(i,"function")?i:function(e){return e===i},n=null;for(var r=0,a=e.length-1,o;r<a;r++){o=e[r];if(t(o))n=r}return null!=n?n:-1};var t=function(){var e;var t=function(t,n,r){if(i(e,t.w)<0){e.push(t.w);r.splice(n,1);t.w.name=t.d}};return function(){e=[];if(o&&o.length)for(var i=o.length,n;i--;i>=0){n=o[i];t(n,i,o)}e=null}}();var n=function(){var i=unescape(window.name||"");if(i&&0==i.indexOf(e)){window.name="";var t=i.replace(e,""),n=t.split("|"),r=n.length,a={};for(var o=0;o<r;o++){var s=n[o].split("=");if(!s||!s.length)return;var c=s.shift();if(!c)return;a[decodeURIComponent(c)]=decodeURIComponent(s.join("="))}t=a;var f=(t.origin||"").toLowerCase();if(!f||"*"==f||0==location.href.toLowerCase().indexOf(f))R({data:t.data||"null",origin:d(t.ref||document.referrer)})}};return function(){setInterval(t,100);setInterval(n,20)}}();var U=function(){if(!window.__hasRun){if(window.postMessage)e(window,"message",S);else x();window.__hasRun=1}};return U()};window.URS.prototype.prepareIframe=function(){if(this.isInclude){n.addIframe(this.includeBox,1);n.initIframe.call(this);this.showIframe()}else{n.addIframe(s);n.initIframe.call(this)}};window.URS.prototype.showIframe=function(e){if(!this.isInclude)if(!n.needPrepare){n.addIframe(s);n.initIframe.call(this)}else if(!n._initReady)return;e=e||{};if(e.page){if(e.page!=a.page&&a.single){var i="index_dl.html";if("register"==e.page)i="index_reg.html";var o=e.crossDomainUrl||"webzj.reg.163.com/out/pub/";var d=parseInt(1e3*Math.random());e.pathB=0;if(window.URS._$pathBPercent)if(d<=window.URS._$pathBPercent)e.pathB=1;if(e.pathB)r=t(r);r=window.PTDOM+o+i;if(n.__cssStr)r+="?"+n.__cssStr+"&wdaId="+(e.wdaId||"");else r+="?wdaId="+(e.wdaId||"");r+="&pkid="+(e.promark||"")+"&product="+(e.product||"")}n.initIframe.call(this);a.page=e.page}if(n.needPrepare&&!this.isInclude)c.call(this);s.style.display="block";
};window.URS.prototype.closeIframe=function(){if(!this.isInclude){s.style.display="none";n.initIframe.call(this);if(!n.needPrepare){n.flag=!1;if(navigator.userAgent.indexOf("MSIE")>0){var e=document.getElementById("x-URS-iframe"),i=e.contentWindow;if(e){e.src="about:blank";try{i.document.write("");i.document.clear()}catch(t){}}var r=document.getElementById("x-panel");r.removeChild(e);window.CollectGarbage()}s.innerHTML=""}}else;};window.URS.setPkidAndPd=function(){var e=function(e){var i;if(e&&e.lgs){i=e.lgs||"0";window.URS._$pathBPercent=parseInt(i)}};var i=function(i){var t=i.pkid||"";var n=i.pd||"";var r;if(void 0===i.mode)r="3";else r=i.mode;if("3"!=r&&"0"!=r){var a="URSJSONP"+(new Date).getTime();window[a]=e;var o="//dl.reg.163.com/getConf?callback="+a+"&pkid="+t+"&pd="+n+"&mode="+r;var s=document.createElement("script");s.type="text/javascript";s.id="urs-script-"+a;s.src=o;document.getElementsByTagName("head")[0].appendChild(s);setTimeout(function(){document.getElementsByTagName("head")[0].removeChild(s)},5e3)}};return function(e){i(e)}}()}();