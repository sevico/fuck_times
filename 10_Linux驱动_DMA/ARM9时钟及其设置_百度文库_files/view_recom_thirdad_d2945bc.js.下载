define("wkview:widget/view_recom_thirdad/view_recom_thirdad.js",function(e,a,n){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkcommon:widget/lib/doT/doT.min.js"),i=e("wkcommon:widget/ui/lib/inCharset/inCharset.js"),c=e("wkcommon:widget/ui/js_core/log/log.js"),o=e("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js"),l=e("wkcommon:widget/lib/fis/data/data.js"),r={init:function(e){var a=this;if(e=e.data,a.temp=0,a.fcEid=+e.eid||0,a.rightFc=e&&e.right_fengchao_ad?e.right_fengchao_ad:"",a.readFc=e&&e.read_fengchao_ad?e.read_fengchao_ad:"",a.rightWm=e&&e.recommend_ad_wangmeng?e.recommend_ad_wangmeng:"",a.goldClue=e&&e.right_fengchao_gold_ad?e.right_fengchao_gold_ad:"",a.wenji="",a.rightFc&&a.rightFc.ad_place_data&&a.renderLikeRecomFc(a.rightFc),a.readFc&&a.readFc.ad_place_data&&"object"==typeof a.readFc.ad_place_data?t.event.trigger("docloadOwnData",a.readFc):!a.goldClue&&a.readFc&&a.readFc.ad_place_data&&"object"!=typeof a.readFc.ad_place_data&&t.event.trigger("docloadFCData",a.readFc),a.goldClue&&t(".goldclue-wrap").length>0){var n=e,d=l.get("WkInfo").DocInfo.docId;t.ajax({url:"/org/interface/getcorpusinfo?doc_id="+d,type:"get",success:function(e){0===+e.status.code&&(c.xsend(1,101055),a.wenji=e.data,a.renderGoldClue(n,e.data),e.data.goldClue=a.goldClue,t.event.trigger("showendPageGoldClueAd",e.data))}})}a.rightWm&&a.renderLikeRecomWm(a.rightWm),a.logObj={},a.fcEid&&a.logNum(a.fcEid),a.events()},renderGoldClue:function(e,a){var n=(e.right_fengchao_gold_ad.ad_place_data.url,'<div class="goldclue-content">\n<div class="goldclue-head">\n<p class="goldclue-count"><em>{{= it.data.corpus_list.length}}</em>\u7bc7</p>\n<p class="goldclue-title">\u76f8\u5173\u7cbe\u54c1\u6587\u8f91</p>\n<p class="goldclue-notes"><em>{{= it.data.down_count}}</em>\u4eba\u5df2\u4e0b\u8f7d</p>\n</div>\n<ul class="goldclue-main">\n{{~it.data.show_corpus :item:i}}{{? i< 3}}\n		<li><a><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</a></li>\n{{?}}{{~}}</ul>\n<div class="goldclue-bottom">\n\u67e5\u770b\u5168\u90e8<em>{{= it.data.corpus_list.length}}</em>\u7bc7\u6587\u6863 ></div>\n</div>');n=d.template(n),t(".goldclue-wrap").html(n({data:a}))},renderLikeRecomFc:function(e){var a=this;t(".frist-item").html(e.ad_place_data);var n=e.ad_place_js,d="<script>"+n+"</script>";t("head").append(d);var o=t(".frist-item h1").text()||"",r=t(".frist-item p span").eq(0).text()||"",g=l.get("WkInfo").DocInfo.title||"";g=g+"|"+o,(new i.InCharset).get(g,"gbk",function(e){c.xsend(1,100939,{adTitle:e,clickUrl:r,refer:document.referrer})});var s=t(".frist-item .ec-gl-link");if(s.length>0){var u=a.getQueryString("tn")||a.getQueryString("from")||"";u?s.attr("href",s.attr("href")+"&shh="+location.hostname+"&sht="+u):s.attr("href",s.attr("href")+"&shh=wenku.baidu.com")}},renderLikeRecomWm:function(e){var a=e.data.recommends[0],n='<div class="item wangmeng_income">\n<p class="doc-title"><b class="ic ic-wangmeng"></b><a href="{{= it.link}}" class="link-wangmeng" target="_blank" title="{{= it.word}}">{{= it.word}}</a>\n</p>\n<div class="tail-info">\n<span style="width: 58%; display: inline-block;">www.baidu.com</span><span class="gd-g-u gd-u-3-8">\u641c\u7d22\u63a8\u8350</span>\n</div>\n</div>\n';n=d.template(n),t(".frist-item").html(n({word:a.word,link:a.link})),c.xsend(1,100945),a.word||c.xsend(1,101025)},getQueryString:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(a);return null!=n?unescape(n[2]):null},logNum:function(e){var a=this;62307102===e&&a.rightFc&&a.rightFc.ad_place_data?a.logObj.id="101026":82307102===e&&a.readFc&&a.readFc.ad_place_data?a.logObj.id="101027":72307102===e&&a.readFc&&a.readFc.ad_place_data&&(a.logObj.id="101028"),a.logObj.id&&(t(".more-btn-banner .banner-download").on("click",function(){c.xsend(1,a.logObj.id,{index:1})}),t(".pay-page-inner .reader-download").on("click",function(){c.xsend(1,a.logObj.id,{index:2})}),t(".pay-page-inner .btn-login-joinvip-rightnow").on("click",function(){c.xsend(1,a.logObj.id,{index:3})}),t(".more-btn-banner .goBtn").on("click",function(){c.xsend(1,a.logObj.id,{index:4})}))},events:function(){var e=this;t(".goldclue-wrap").on("click",function(a){var n=t(a.target);if(!n.hasClass("goldclue-notes")){c.xsend(1,101056);var d=e.goldClue;e.temp||t(".goldclue-wrap").hasClass("second-click")?new o(d,e.wenji,3):(new o(d,e.wenji,1),t(".goldclue-wrap").hasClass("second-click")||t(".goldclue-wrap").addClass("second-click"),e.temp=e.temp+1)}})}};n.exports=r});