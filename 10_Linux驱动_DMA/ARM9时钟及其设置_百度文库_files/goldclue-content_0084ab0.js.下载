define("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js",function(n,o,e){function a(n,o,e){this.options=n.ad_place_data,this.wenji=o,this.location=e,this.init(),3!==e&&this.events()}var i=n("wkview:widget/view_recom_thirdad/dialog/dialog.js"),t=n("wkcommon:widget/ui/lib/jquery/jquery.js"),l=n("wkcommon:widget/lib/doT/doT.min.js"),s=n("wkcommon:widget/lib/tangram/base/base.js"),r=(n("wkcommon:widget/lib/fis/data/data.js"),n("wkcommon:widget/ui/js_core/log/log.js"));a.prototype={init:function(){this.showDialog()},showDialog:function(){var n='{{? it.pn == 1 }}<div class="glodclue-doclist-wrap ads-doc-list">\n<div class="goldclue-close step1-goldclue-close" data-fun="goldclue-close"></div>\n<div class="glodclue-doclist-head">\n<h2>\u7cbe\u9009\u6587\u8f91\u4e0b\u8f7d</h2>\n<p>\u5171<span class="counter">{{= it.data.corpus_list.length}}</span>\u7bc7\u6587\u6863&nbsp;&nbsp;&nbsp;{{= it.data.down_count}}\u4eba\u5df2\u4e0b\u8f7d&nbsp;&nbsp;&nbsp;<span class="counter">{{= it.bgcData.brand_name}}</span>\u4e13\u4e1a\u63a8\u8350</p>\n</div>\n<div class="glodclue-doclist-content cont">\n<ul class="list dialog-list">\n{{~it.data.corpus_list :item:i}}<li><span class="number">{{= i+1}}</span><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</li>\n{{~}}</ul>\n<a href="###" class="ui-bz-btn-senior goldclue-download" data-fun="goldclue-download">\n<b class="ui-bz-btn-p-40 ui-bz-btc ">\u514d\u8d39\u4e0b\u8f7d</b>\n</a>\n</div>\n<div class="glodclue-doclist-bottom">\n<p><span class="green">{{= it.bgcData.brand_name}}</span>\u4e13\u4e1a\u987e\u95ee\u5c06\u81f4\u7535\u670d\u52a1</p>\n</div>\n</div>\n{{?? it.pn == 2}}<div class="goldclue-form-wrap">\n<div class="goldclue-form-container">\n<div class="goldclue-close" data-fun="goldclue-close"></div>\n<div class="dialog-left-greenbar"></div>\n<div class="goldclue-form">\n<div class="dialog-top">\n<p class="doc-title">\u7cbe\u9009\u6587\u8f91\u4e0b\u8f7d</p>\n</div>\n<div class="dialog-inner">\n<div class="goldform">\n<div class="formgroupGold">\n<label for="name">\u59d3&nbsp;&nbsp;\u540d\uff1a</label><input id="name" type="text" placeholder="\u8bf7\u8f93\u5165\u59d3\u540d" name="name" class="txt_usname fixplaceholder name-error ui-bz-ipt"/>\n<span class="errorinfo">\u8bf7\u8f93\u5165\u59d3\u540d</span>\n</div>\n<div class="formgroupGold">\n<label for="tel">\u7535&nbsp;&nbsp;\u8bdd\uff1a</label><input id="tel" class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u53f7\u7801" name="phone" autocomplete="off">\n<span class="errorinfo">\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7</span>\n</div>\n<div class="formgroupGold" style="display: none;">\n<div class="yzm-wrap">\n<label for="yzm">\u9a8c\u8bc1\u7801\uff1a</label><input id="yzm" class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u9a8c\u8bc1\u7801" name="phone_vcode" style="width: 139px;">\n<a href="javascript:;" class="ui-bz-btn-normal ui-bz-btn-51offer">\n<b class="ui-bz-btn-p-15 ui-bz-btc" data-fun="get-gcmsg">\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801</b>\n</a>\n</div>\n<span class="errorinfo" id="telerror">\u8bf7\u586b\u5199\u6b63\u786e\u624b\u673a\u9a8c\u8bc1\u7801</span>\n</div>\n<div class="glodclue-form-bottom">\n<p><span class="green">{{= it.data.brand_name}}</span>\u4e13\u4e1a\u987e\u95ee\u5c06\u81f4\u7535\u670d\u52a1<span class="cursor">\u9690\u79c1\u4fdd\u969c<span class="hover-goldclue step2-hover">\n\u60a8\u586b\u5199\u7684\u8054\u7cfb\u4fe1\u606f\u5c06\u7531{{= it.data.brand_name}}\u83b7\u53d6\u5e76\u53ef\u80fd\u76f4\u63a5\u5411\u60a8\u81f4\u7535\uff0c\u5982\u60a8\u4e0d\u5e0c\u671b\u6253\u6270\uff0c\u8bf7\u52ff\u4f7f\u7528\u8be5\u670d\u52a1</span>\n</span></p>\n</div>\n<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc" data-fun="goldclue-submit-info">\u514d\u8d39\u4e0b\u8f7d</b></a>\n<p class="submit-error"></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n{{?}}';n=l.template(n),this.tpl=n,i.init(n({pn:"1",bgcData:this.options,data:this.wenji}))},events:function(){var n=this;t("body").on("click",".goldclue-form-wrap",function(o){var e=t(o.target),a=e.attr("data-fun");switch(a){case"goldclue-submit-info":var l=n.getInfo();if(!l)return void t(".submit-error").html("\u8bf7\u5c06\u4fe1\u606f\u586b\u5199\u5b8c\u6574").show();l.user_id=n.options.user_id,l.corpus_id=n.wenji.id,t.post("/xpage/interface/addgoldclues",l,function(o){var e=+o.status.code,a={code10000:"\u63d0\u4ea4\u6570\u636e\u65e0\u6548",code10001:"\u8bf7\u68c0\u67e5\u9a8c\u8bc1\u7801,\u518d\u505a\u63d0\u4ea4",code10002:"\u64cd\u4f5c\u5931\u8d25 \u8bf7\u91cd\u8bd5"};t(".submit-error").html(""),0===+e?(t(".submit-error").hide(),location.href=o.data.url,setTimeout(function(){window.open(+o.data.type?"/org/browse/downloadresult?id="+n.options.user_id:n.options.url)},300),i.closeDialog()):(e="code"+e,t(".submit-error").html(a[e]).show())}),1===n.location?r.xsend(1,101061):2===n.location&&r.xsend(1,101062);break;case"get-gcmsg":var s=t("input[name=phone]");if(!n.isTel(s.val()))return void s.css("border-color","red").siblings(".errorinfo").css("display","block");e.parent().addClass("ui-bz-btn-disable"),e.attr("data-fun","");var c="\u79d2\u540e\u91cd\u53d1",d=120,u="/xpage/interface/sendphonevcode?phone="+s.val();t.get(u,function(n){var o=+n.status.code,a={code10000:"\u65e0\u6548\u7684\u624b\u673a\u53f7",code10001:"\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5",code10002:"\u64cd\u4f5c\u5931\u8d25 \u8bf7\u91cd\u8bd5"};if(o){o="code"+o,alert(a[o]||"\u7cfb\u7edf\u7e41\u5fd9, \u8bf7\u7a0d\u540e\u91cd\u8bd5");var i=setInterval(function(){clearInterval(i),e.parent().removeClass("ui-bz-btn-disable"),e.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-gcmsg")},3e3)}else var t=setInterval(function(){d?(e.text(d+c),d--):(clearInterval(t),e.parent().removeClass("ui-bz-btn-disable"),e.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-gcmsg"))},1e3)});break;case"goldclue-close":i.closeDialog()}}),t("body").on("click",".goldclue-download",function(){i.closeDialog(),i.init(n.tpl({pn:"2",data:n.options})),n.placeholder(),1===n.location?r.xsend(1,101059):2===n.location&&r.xsend(1,101060)}),t("body").on("click",".step1-goldclue-close",function(){t("body .step1-goldclue-close").unbind("click"),i.closeDialog()}),t("body").on("keyup change",".goldclue-form-container input[name=phone]",function(o){o.preventDefault();var e=t(this).val();n.isTel(e)&&t(".yzm-wrap").parent().show()}),t("body").on("blur",".goldclue-form-container input[name=phone]",function(){var o=t(this),e=o.val();return n.rmErr("phone"),n.isTel(e)?void 0:void n.showErr("phone")}),t("body").on("blur",".goldclue-form-container input[name=name]",function(){var o=t(this),e=o.val();return n.rmErr("name"),e?void 0:void n.showErr("name")}),t("body").on("mouseover",".cursor",function(){t(".hover-goldclue").show()}),t("body").on("mouseleave",".cursor",function(){t(".hover-goldclue").hide()})},isTel:function(n){return!!n.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/)},placeholder:function(){+s.browser.ie<=9&&t(".fixplaceholder").each(function(n,o){var e=t(o).attr("placeholder");t(o).val(e).click(function(){t(this).val()===e&&t(this).val("")}).blur(function(){var n=t(this).val();t.trim(n)||t(this).val(e)})})},showErr:function(n){t("input[name="+n+"]").parents(".formgroupGold").addClass(n+"err")},rmErr:function(n){t("input[name="+n+"]").parents(".formgroupGold").removeClass(n+"err")},getInfo:function(){for(var n=t(".goldform").find(":input").serializeArray(),o={},e=!0,a=0;a<n.length;a++){if(!n[a].value)return e=!1;o[n[a].name]=n[a].value}return o}},e.exports=a});